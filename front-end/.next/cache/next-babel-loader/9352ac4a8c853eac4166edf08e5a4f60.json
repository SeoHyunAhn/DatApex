{"ast":null,"code":"var _jsxFileName = \"/Users/seohyun/dataPex/front-end/pages/history.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport Link from \"next/link\";\nimport firebase from \"../common/firebase\";\nimport ListEle from \"../components/list\";\nimport { create } from \"domain\";\n\nclass History extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [],\n      history3: [] //   tem: \"\"\n\n    };\n  }\n\n  async componentDidMount() {\n    var storage = firebase.storage().ref();\n    const user = firebase.auth().currentUser.uid; // console.log(storage);\n\n    var t = await storage.child(user).list().then(function (urls) {\n      // this.setState({history3: url.items})\n      return urls.items.map(url => url.location.path);\n    });\n    console.log(t); //   .then(function(data) {\n\n    var temp = []; // console.log(data);\n\n    for (var i = 0; i < t.length; i++) {\n      // temp.push(data[i].location.path);\n      var s = await storage.child(t[i]).getDownloadURL().then(e => {\n        // temp.push(e)\n        return e; // this.setState({tem: e})\n        // console.log(this.state);\n      });\n      temp.push(s);\n    }\n\n    console.log(temp);\n    t = t.map(a => {\n      var as = a.split(\"_\");\n      var aa = as[0].split(\"/\");\n      return aa[1];\n    });\n    this.setState({\n      history: t,\n      history3: temp\n    }); // return temp;\n    // this.setState({history: temp})\n    //   })\n    //   .then(e => {\n    // console.log(e.data.length);\n    // var t = [];\n    // for(var i = 0; i < e.data.length; i++){\n    //     var ele = {date: e.data[i].location.path, downloadURL: e.temp[i]}\n    //     console.log(ele);\n    //     t.push(ele);\n    // }\n    // console.log(t);\n    // this.setSetate({history: t})\n    //   })\n    //   .catch(function(error) {});\n    // console.log(t);\n  } //   createTable() {\n  //     console.log(this.state.history);\n  //     console.log(this.state.history3);\n  //   }\n\n\n  render() {\n    var items = [];\n    console.log(this.state.history);\n\n    for (var i = 0; i < this.state.history.length; i++) {\n      //   items.push(<div>{this.state.history[i]}</div>);\n      items.push(__jsx(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, __jsx(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, this.state.history[i]), __jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, \"ML\"), __jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, __jsx(\"a\", {\n        href: this.state.history3[i],\n        downloadURL: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Download\")))));\n    }\n\n    return __jsx(React.Fragment, null, __jsx(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"History\"), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"col-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, __jsx(\"table\", {\n      className: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, __jsx(\"thead\", {\n      className: \"thead-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, __jsx(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, __jsx(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Date\"), __jsx(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Type\"), __jsx(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"File Result\"))), __jsx(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, items))))));\n  }\n\n}\n\nexport default History;","map":{"version":3,"sources":["/Users/seohyun/dataPex/front-end/pages/history.js"],"names":["React","Component","Link","firebase","ListEle","create","History","constructor","props","state","history","history3","componentDidMount","storage","ref","user","auth","currentUser","uid","t","child","list","then","urls","items","map","url","location","path","console","log","temp","i","length","s","getDownloadURL","e","push","a","as","split","aa","setState","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Link from \"next/link\";\nimport firebase from \"../common/firebase\";\nimport ListEle from \"../components/list\";\nimport { create } from \"domain\";\n\nclass History extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [],\n      history3: [],\n    //   tem: \"\"\n    };\n  }\n\n  async componentDidMount() {\n    var storage = firebase.storage().ref();\n    const user = firebase.auth().currentUser.uid;\n    // console.log(storage);\n    var t = await storage\n      .child(user)\n      .list()\n      .then(function(urls) {\n        // this.setState({history3: url.items})\n\n        return urls.items.map(url => url.location.path);\n      });\n    console.log(t);\n\n    //   .then(function(data) {\n    var temp = [];\n    // console.log(data);\n    for (var i = 0; i < t.length; i++) {\n      // temp.push(data[i].location.path);\n      var s = await storage\n        .child(t[i])\n        .getDownloadURL()\n        .then(e => {\n          // temp.push(e)\n          return e;\n          // this.setState({tem: e})\n          // console.log(this.state);\n        });\n      temp.push(s);\n    }\n    console.log(temp);\n\n    t = t.map(a => {\n        var as = a.split(\"_\");\n        var aa = as[0].split(\"/\");\n        return aa[1]\n    })\n    this.setState({history: t, history3: temp})\n    // return temp;\n    // this.setState({history: temp})\n    //   })\n    //   .then(e => {\n\n    // console.log(e.data.length);\n    // var t = [];\n    // for(var i = 0; i < e.data.length; i++){\n    //     var ele = {date: e.data[i].location.path, downloadURL: e.temp[i]}\n    //     console.log(ele);\n    //     t.push(ele);\n    // }\n\n    // console.log(t);\n    // this.setSetate({history: t})\n    //   })\n    //   .catch(function(error) {});\n\n    // console.log(t);\n  }\n\n//   createTable() {\n//     console.log(this.state.history);\n//     console.log(this.state.history3);\n//   }\n\n  render() {\n    var items = [];\n    console.log(this.state.history);\n    for (var i = 0; i < this.state.history.length; i++) {\n    //   items.push(<div>{this.state.history[i]}</div>);\n\n      items.push(<tr>\n          <th scope=\"row\">{this.state.history[i]}</th>\n          <td>ML</td>\n          <td>\n          <a href={this.state.history3[i]} downloadURL>\n            <button className=\"btn btn-primary\">Download</button>\n            </a>\n          </td>\n        </tr>)\n    }\n\n    return (\n      <>\n        <h1>History</h1>\n        <hr></hr>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col-12\">\n              <table className=\"table\">\n                <thead className=\"thead-light\">\n                  <tr>\n                    <th scope=\"col\">Date</th>\n                    <th scope=\"col\">Type</th>\n                    <th scope=\"col\">File Result</th>\n                  </tr>\n                </thead>\n                <tbody>\n\n        {items}\n                  {/* <div className=\"col-6\"> }\n              {this.state.isvalid ? (\n                <>\n                <tr>\n            <th scope=\"row\">{this.state.history[0].downloadURL}</th>\n            <td>ML</td>\n            <td>\n            <a href={this.state.history[0].downloadURL}>\n              <button className=\"btn btn-primary\">Download</button>\n              </a>\n            </td>\n          </tr>\n                </>\n              ) : (\n                <></>\n              )*/\n                  /* {this.gethistory()} */\n                  /*\n                  {this.state.history.map(his => {\n                    <tr>\n                      <th scope=\"row\">{his}</th>\n                      <td>ML</td>\n                      <td>\n                        {/* <a href={home.downloadURL}>\n                          <button className=\"btn btn-primary\">\n                            {home.downloadURL}\n                          </button>\n                        </a> }\n                      </td>\n                    </tr>;\n                  })}\n                  {/* /* <tr>\n                    <th scope=\"row\">1/1/2019</th>\n                    <td>ML</td>\n                    <td>\n                      <button className=\"btn btn-primary\">Download</button>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th scope=\"row\">1/1/2019</th>\n                    <td>PRE</td>\n                    <td>\n                      <button className=\"btn btn-primary\">Download</button>\n                    </td>\n                  </tr>\n                  <tr>\n                    <th scope=\"row\">1/1/2019</th>\n                    <td>ML</td>\n                    <td>\n                      <button className=\"btn btn-primary\">Download</button>\n                    </td>\n                  </tr> */}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default History;\n"]},"metadata":{},"sourceType":"module"}