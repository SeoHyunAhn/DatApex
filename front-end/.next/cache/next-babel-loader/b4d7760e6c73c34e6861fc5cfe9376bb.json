{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/youngjoon/Desktop/CS407/DatApex/front-end/pages/history.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport Link from \"next/link\";\nimport firebase from \"../common/firebase\";\nimport { create } from \"domain\";\n\nvar History =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(History, _Component);\n\n  function History(props) {\n    var _this;\n\n    _classCallCheck(this, History);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(History).call(this, props));\n    _this.state = {\n      dateOfFile: [],\n      type: [],\n      downloadURL: []\n    };\n    return _this;\n  }\n\n  _createClass(History, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var storage, user, t, temp, i, s, dates, types;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                storage = firebase.storage().ref(); // const user = firebase.auth().currentUser.uid;\n\n                user = firebase.auth().currentUser.uid;\n                _context.next = 4;\n                return storage.child(user).list().then(function (urls) {\n                  return urls.items.map(function (url) {\n                    return url.location.path;\n                  });\n                });\n\n              case 4:\n                t = _context.sent;\n                console.log(t);\n                temp = [];\n                i = 0;\n\n              case 8:\n                if (!(i < t.length)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                _context.next = 11;\n                return storage.child(t[i]).getDownloadURL().then(function (e) {\n                  return e;\n                });\n\n              case 11:\n                s = _context.sent;\n                temp.push(s);\n\n              case 13:\n                i++;\n                _context.next = 8;\n                break;\n\n              case 16:\n                console.log(temp);\n                dates = t.map(function (a) {\n                  var as = a.split(\"_\");\n                  var aa = as[0].split(\"/\");\n                  return aa[1];\n                });\n                types = t.map(function (a) {\n                  var as = a.split(\"_\");\n                  return as[1];\n                });\n                this.setState({\n                  dateOfFile: dates,\n                  type: types,\n                  downloadURL: temp\n                });\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var items = [];\n      console.log(this.state.dateOfFile);\n\n      for (var i = 0; i < this.state.dateOfFile.length; i++) {\n        items.push(__jsx(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, __jsx(\"td\", {\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \"1\"), __jsx(\"td\", {\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, this.state.dateOfFile[i]), __jsx(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, this.state.type[i]), __jsx(\"td\", {\n          className: \"w-25 text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, this.state.type[i] !== \"ML\" ? __jsx(\"a\", {\n          href: this.state.downloadURL[i],\n          download: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, __jsx(\"button\", {\n          className: \"btn btn-primary btn-lg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, \"Download\")) : __jsx(\"img\", {\n          src: this.state.downloadURL[i],\n          className: \"img-fluid img-thumbnail\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }))));\n      }\n\n      return __jsx(React.Fragment, null, __jsx(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"History\"), __jsx(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }), __jsx(\"div\", {\n        className: \"container-fluid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"col-12 table-responsive\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, __jsx(\"table\", {\n        className: \"table table-bordered table-hover\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, __jsx(\"thead\", {\n        className: \"thead-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, __jsx(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, __jsx(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Date\"), __jsx(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, \"Type\"), __jsx(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"File Result\"))), __jsx(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, items))))));\n    }\n  }]);\n\n  return History;\n}(Component);\n\nexport default History;","map":{"version":3,"sources":["/Users/youngjoon/Desktop/CS407/DatApex/front-end/pages/history.js"],"names":["React","Component","Link","firebase","create","History","props","state","dateOfFile","type","downloadURL","storage","ref","user","auth","currentUser","uid","child","list","then","urls","items","map","url","location","path","t","console","log","temp","i","length","getDownloadURL","e","s","push","dates","a","as","split","aa","types","setState"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Link from \"next/link\";\nimport firebase from \"../common/firebase\";\nimport { create } from \"domain\";\n\nclass History extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dateOfFile: [],\n      type: [],\n      downloadURL: []\n    };\n  }\n\n  async componentDidMount() {\n    var storage = firebase.storage().ref();\n    // const user = firebase.auth().currentUser.uid;\n    \n    const user = firebase.auth().currentUser.uid;\n\n    var t = await storage\n      .child(user)\n      .list()\n      .then(function(urls) {\n        return urls.items.map(url => url.location.path);\n      });\n    console.log(t);\n\n    var temp = [];\n    for (var i = 0; i < t.length; i++) {\n      var s = await storage\n        .child(t[i])\n        .getDownloadURL()\n        .then(e => {\n          return e;\n        });\n      temp.push(s);\n    }\n    console.log(temp);\n\n    var dates = t.map(a => {\n        var as = a.split(\"_\");\n        var aa = as[0].split(\"/\");\n        return aa[1];\n      });\n      var types = t.map(a => {\n        var as = a.split(\"_\");\n        return as[1];\n      });\n    this.setState({ dateOfFile: dates, type: types, downloadURL: temp });\n  }\n\n  render() {\n    var items = [];\n    console.log(this.state.dateOfFile);\n    for (var i = 0; i < this.state.dateOfFile.length; i++) {\n      items.push(\n        <tr>\n          <td scope=\"row\">1</td>\n          <td scope=\"row\">{this.state.dateOfFile[i]}</td>\n          <td>{this.state.type[i]}</td>\n          <td className=\"w-25 text-center\">\n\n            { this.state.type[i] !== \"ML\" ?\n              (\n                <a href={this.state.downloadURL[i]} download>\n                  <button className=\"btn btn-primary btn-lg\">Download</button>\n                </a>\n              ) :\n              (\n                <img src={this.state.downloadURL[i]} className=\"img-fluid img-thumbnail\"></img>\n              )\n            }\n          </td>\n        </tr>\n      );\n    }\n\n    return (\n\n      <>\n        <h1>History</h1>\n        <hr></hr>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col-12 table-responsive\">\n              <table className=\"table table-bordered table-hover\">\n                <thead className=\"thead-light\">\n                  <tr>\n                    <th scope=\"col\">Date</th>\n                    <th scope=\"col\">Type</th>\n                    <th scope=\"col\">File Result</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  { items }\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default History;\n"]},"metadata":{},"sourceType":"module"}