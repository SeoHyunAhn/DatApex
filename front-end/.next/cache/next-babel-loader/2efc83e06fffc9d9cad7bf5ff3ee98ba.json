{"ast":null,"code":"var _jsxFileName = \"/Users/youngjoon/Desktop/CS407/DatApex/front-end/pages/history.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport Link from \"next/link\";\nimport firebase from \"../common/firebase\";\nimport { create } from \"domain\";\n\nclass History extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dateOfFile: [],\n      type: [],\n      downloadURL: []\n    };\n  }\n\n  async componentDidMount() {\n    var storage = firebase.storage().ref(); // const user = firebase.auth().currentUser.uid;\n\n    const user = firebase.auth().currentUser.uid;\n    var t = await storage.child(user).list().then(function (urls) {\n      return urls.items.map(url => url.location.path);\n    });\n    console.log(t);\n    var temp = [];\n\n    for (var i = 0; i < t.length; i++) {\n      var s = await storage.child(t[i]).getDownloadURL().then(e => {\n        return e;\n      });\n      temp.push(s);\n    }\n\n    console.log(temp);\n    var dates = t.map(a => {\n      var as = a.split(\"_\");\n      var aa = as[0].split(\"/\");\n      return aa[1];\n    });\n    var types = t.map(a => {\n      var as = a.split(\"_\");\n      return as[1];\n    });\n    this.setState({\n      dateOfFile: dates,\n      type: types,\n      downloadURL: temp\n    });\n  }\n\n  render() {\n    var items = [];\n    console.log(this.state.dateOfFile);\n\n    for (var i = 0; i < this.state.dateOfFile.length; i++) {\n      items.push(__jsx(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, __jsx(\"td\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, i + 1), __jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, this.state.dateOfFile[i]), __jsx(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, this.state.type[i]), __jsx(\"td\", {\n        className: \"w-25 text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, this.state.type[i] !== \"ML\" ? __jsx(\"a\", {\n        href: this.state.downloadURL[i],\n        download: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        className: \"btn btn-primary btn-lg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Download\")) : __jsx(\"img\", {\n        src: this.state.downloadURL[i],\n        className: \"img-fluid img-thumbnail\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }))));\n    }\n\n    return __jsx(React.Fragment, null, __jsx(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"History\"), __jsx(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }), __jsx(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"col-12 table-responsive\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, __jsx(\"table\", {\n      className: \"table table-bordered table-hover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, __jsx(\"thead\", {\n      className: \"thead-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, __jsx(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, __jsx(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"#\"), __jsx(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Date\"), __jsx(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Type\"), __jsx(\"th\", {\n      scope: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"File Result\"))), __jsx(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, items))))));\n  }\n\n}\n\nexport default History;","map":{"version":3,"sources":["/Users/youngjoon/Desktop/CS407/DatApex/front-end/pages/history.js"],"names":["React","Component","Link","firebase","create","History","constructor","props","state","dateOfFile","type","downloadURL","componentDidMount","storage","ref","user","auth","currentUser","uid","t","child","list","then","urls","items","map","url","location","path","console","log","temp","i","length","s","getDownloadURL","e","push","dates","a","as","split","aa","types","setState","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Link from \"next/link\";\nimport firebase from \"../common/firebase\";\nimport { create } from \"domain\";\n\nclass History extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dateOfFile: [],\n      type: [],\n      downloadURL: []\n    };\n  }\n\n  async componentDidMount() {\n    var storage = firebase.storage().ref();\n    // const user = firebase.auth().currentUser.uid;\n    \n    const user = firebase.auth().currentUser.uid;\n\n    var t = await storage\n      .child(user)\n      .list()\n      .then(function(urls) {\n        return urls.items.map(url => url.location.path);\n      });\n    console.log(t);\n\n    var temp = [];\n    for (var i = 0; i < t.length; i++) {\n      var s = await storage\n        .child(t[i])\n        .getDownloadURL()\n        .then(e => {\n          return e;\n        });\n      temp.push(s);\n    }\n    console.log(temp);\n\n    var dates = t.map(a => {\n        var as = a.split(\"_\");\n        var aa = as[0].split(\"/\");\n        return aa[1];\n      });\n      var types = t.map(a => {\n        var as = a.split(\"_\");\n        return as[1];\n      });\n    this.setState({ dateOfFile: dates, type: types, downloadURL: temp });\n  }\n\n  render() {\n    var items = [];\n    console.log(this.state.dateOfFile);\n    for (var i = 0; i < this.state.dateOfFile.length; i++) {\n      items.push(\n        <tr>\n          <td scope=\"row\">{ i+1 }</td>\n          <td>{this.state.dateOfFile[i]}</td>\n          <td>{this.state.type[i]}</td>\n          <td className=\"w-25 text-center\">\n\n            { this.state.type[i] !== \"ML\" ?\n              (\n                <a href={this.state.downloadURL[i]} download>\n                  <button className=\"btn btn-primary btn-lg\">Download</button>\n                </a>\n              ) :\n              (\n                <img src={this.state.downloadURL[i]} className=\"img-fluid img-thumbnail\"></img>\n              )\n            }\n          </td>\n        </tr>\n      );\n    }\n\n    return (\n\n      <>\n        <h1>History</h1>\n        <hr></hr>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col-12 table-responsive\">\n              <table className=\"table table-bordered table-hover\">\n                <thead className=\"thead-light\">\n                  <tr>\n                    <th scope=\"col\">#</th>\n                    <th scope=\"col\">Date</th>\n                    <th scope=\"col\">Type</th>\n                    <th scope=\"col\">File Result</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  { items }\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default History;\n"]},"metadata":{},"sourceType":"module"}