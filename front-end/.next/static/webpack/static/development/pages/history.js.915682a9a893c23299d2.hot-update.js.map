{"version":3,"file":"static/webpack/static/development/pages/history.js.915682a9a893c23299d2.hot-update.js","sources":["webpack:///./pages/history.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport Link from \"next/link\";\nimport firebase from \"../common/firebase\";\nimport { create } from \"domain\";\n\nclass History extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dateOfFile: [],\n      type: [],\n      downloadURL: []\n    };\n  }\n\n  async componentDidMount() {\n    var storage = firebase.storage().ref();\n    // const user = firebase.auth().currentUser.uid;\n    \n    const user = firebase.auth().currentUser.uid;\n\n    var t = await storage\n      .child(user)\n      .list()\n      .then(function(urls) {\n        return urls.items.map(url => url.location.path);\n      });\n    console.log(t);\n\n    var temp = [];\n    for (var i = 0; i < t.length; i++) {\n      var s = await storage\n        .child(t[i])\n        .getDownloadURL()\n        .then(e => {\n          return e;\n        });\n      temp.push(s);\n    }\n    console.log(temp);\n\n    var dates = t.map(a => {\n        var as = a.split(\"_\");\n        var aa = as[0].split(\"/\");\n        return aa[1];\n      });\n      var types = t.map(a => {\n        var as = a.split(\"_\");\n        return as[1];\n      });\n    this.setState({ dateOfFile: dates, type: types, downloadURL: temp });\n  }\n\n  render() {\n    var items = [];\n    console.log(this.state.dateOfFile);\n    for (var i = 0; i < this.state.dateOfFile.length; i++) {\n      items.push(\n        <tr>\n          <td scope=\"row\">{this.state.dateOfFile[i]}</td>\n          <td>{this.state.type[i]}</td>\n          <td className=\"w-25 text-center\">\n\n            { this.state.type[i] !== \"ML\" ?\n              (\n                <a href={this.state.downloadURL[i]} download>\n                  <button className=\"btn btn-primary btn-lg\">Download</button>\n                </a>\n              ) :\n              (\n                <img src={this.state.downloadURL[i]} className=\"img-fluid img-thumbnail\"></img>\n              )\n            }\n          </td>\n        </tr>\n      );\n    }\n\n    return (\n\n      <>\n        <h1>History</h1>\n        <hr></hr>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"col-12 table-responsive\">\n              <table className=\"table table-bordered table-hover\">\n                <thead className=\"thead-light\">\n                  <tr>\n                    <th scope=\"col\">Date</th>\n                    <th scope=\"col\">Type</th>\n                    <th scope=\"col\">File Result</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  { items }\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default History;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAFA;AAOA;AACA;;;;;;;;;;;;AAEA;AACA;AAEA;;AAEA;AAIA;AAAA;AAAA;AACA;AACA;;AANA;AAMA;AAEA;AACA;AACA;;AADA;;;;;;AACA;AAIA;AACA;AACA;;AANA;AAMA;AACA;;AARA;;;;;AASA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;;;;AAlGA;AACA;AAoGA;;;;A","sourceRoot":""}